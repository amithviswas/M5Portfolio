/*
  NOTE: A CssSyntaxError "Unknown word" was reported at line 346, column 1 of this file.
  The context provided to the AI agent ends before this line.
  Please manually inspect line 346 and the surrounding lines for CSS syntax errors
  (e.g., unclosed braces, unclosed comments, invalid characters, typos in selectors/properties).
*/
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 10% 3.9%; /* Deep Navy Black for Nightfall */
    --foreground: 0 0% 98%; /* White */

    --card: 240 4% 8%; /* Darker Navy-Gray for cards */
    --card-foreground: 0 0% 98%;

    --popover: 240 4% 8%; 
    --popover-foreground: 0 0% 98%;

    --primary: 0 100% 50%; /* Blood Red #FF3333 */
    --primary-foreground: 0 0% 98%; 

    --secondary: 240 4% 12%; /* Slightly lighter navy-gray */
    --secondary-foreground: 0 0% 90%;

    --muted: 240 4% 20%; 
    --muted-foreground: 0 0% 70%;

    --accent: 18 100% 50%; /* Vibrant Orange - Keep or change to an M violet/blue? */
    --accent-foreground: 0 0% 98%;

    --destructive: 0 72% 51%; /* Slightly darker red for destructive */
    --destructive-foreground: 0 0% 98%;

    --border: 240 4% 15%; /* Darker Border for Nightfall */
    --input: 240 4% 15%;
    --ring: 0 100% 50%; /* Primary Red for focus rings */

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    
    --radius: 0.5rem;

    /* Sidebar variables - keep as is or update for Nightfall? Assume keep for now */
    --sidebar-background: 240 10% 3.9%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 0 100% 50%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4% 12%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 240 4% 15%;
    --sidebar-ring: 0 100% 50%;

    /* M Theme Colors (existing, some might be overridden by Nightfall) */
    --bmw-m-blue: 208 100% 47%; /* Standard M Blue */
    --blood-red: 0 100% 50%; 
    --shadow-gray: 0 2% 11%; 
    --m-light-blue-hsl: 208 100% 60%; 
    --m-dark-blue-hsl: 208 100% 38%; 
    --m-red-hsl: 0 100% 50%; 
    --m-violet-hsl: 270 80% 60%;

    /* Empire Edition Colors (some used by Hero) */
    --royal-blue-hsl: 220 70% 50%;
    --crimson-hsl: 348 83% 47%;
    --gold-hsl: 45 100% 50%;
    --silver-hsl: 0 0% 75%; 
    --i-blue-fog-hsl: 210 100% 20%;

    /* Nightfall Atelier Specific Colors */
    --liquid-obsidian-start: 240 6% 5%;
    --liquid-obsidian-end: 240 8% 2%;
    --hyper-violet-hsl: 270 90% 65%;
    --voltage-gold-hsl: 50 100% 60%;
    --bmw-i-blue-hsl: 200 100% 50%; /* For RPM Bar */


    --ease-m-blip: cubic-bezier(.36,1.08,.33,1);
    --ease-m-throttle: cubic-bezier(.36,1.08,.33,1);
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1); /* For Studio Glide */

    /* Font Variables are set by next/font in layout.tsx */
    /* --font-rajdhani, --font-playfair-display, --font-space-grotesk, --font-fraunces, --font-inter */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    scroll-behavior: smooth;
  }
  body {
    /* Base Nightfall background - subtle pattern */
    background-color: hsl(var(--background));
    background-image: 
      linear-gradient(45deg, hsla(var(--card), 0.1) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.1) 75%, hsla(var(--card), 0.1)),
      linear-gradient(-45deg, hsla(var(--card), 0.1) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.1) 75%, hsla(var(--card), 0.1));
    background-size: 16px 16px; /* Slightly larger pattern */
    @apply text-foreground font-sans; 
    position: relative; 
  }

  body.dark::before { /* Carbon Fiber Noise Overlay -> Updated for Atelier Subtle Texture */
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
    background-image: 
      linear-gradient(135deg, hsla(0,0%,5%,0.01) 25%, transparent 25%),
      linear-gradient(225deg, hsla(0,0%,5%,0.01) 25%, transparent 25%),
      linear-gradient(45deg, hsla(0,0%,5%,0.01) 25%, transparent 25%),
      linear-gradient(315deg, hsla(0,0%,5%,0.01) 25%, transparent 25%);
    background-position: 0 0, 1px 1px, 1px 1px, 0 0;
    background-size: 2px 2px; /* Finer noise */
    opacity: 0.06; /* Slightly more visible for texture */
    pointer-events: none;
    z-index: -1; 
  }

  /* General heading style if needed, using new primary font */
  .font-heading { /* This is a generic helper, components might specify fonts directly */
    font-family: var(--font-fraunces); /* Default heading to Fraunces */
    @apply font-bold uppercase tracking-wider;
  }

  .button-m-glow, .card-m-glow { /* Kept for other sections, Hero uses more specific glows */
    @apply shadow-[0_0_15px_hsl(var(--primary)/0.5)] transition-shadow duration-300 ease-in-out;
  }
  .button-m-glow:hover, .card-m-glow:hover {
    @apply shadow-[0_0_25px_hsl(var(--primary)/0.8)];
  }

  .transition-m-blip {
    @apply transition-[color,background-color,border-color,text-decoration-color,text-shadow,transform,box-shadow,opacity,filter] duration-150 ease-m-blip;
  }
}

/* ShadCN Component Overrides & Custom Styles (Existing, ensure compatibility) */
.DialogContent[data-state="open"] {
  display: flex;
  flex-direction: column;
  overflow: hidden; 
}
/* ... other existing Dialog styles ... */

/* Navbar Grille Underline (Existing, ensure compatibility or update if Nightfall has specific nav style) */
.nav-grille-underline {
  position: relative;
  overflow: visible; 
  @apply transition-m-blip;
}
.nav-grille-underline::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: -2px; 
  transform: translateX(-50%);
  width: 0%;
  height: 4px; 
  background-image: linear-gradient(
    to right,
    hsl(var(--bmw-m-blue)) 0%, 
    hsl(var(--bmw-m-blue)) var(--grille-blue-stop-percentage, 55%),
    hsl(var(--primary)) var(--grille-red-start-percentage, 55%),
    hsl(var(--primary)) 100%
  );
  border-radius: 9999px; 
  box-shadow: inset 0 1px 2px rgba(0,0,0,.4); 
  filter: drop-shadow(0 0 3px hsla(var(--bmw-m-blue), 0.5)) drop-shadow(0 0 3px hsla(var(--primary), 0.5));
  opacity: 0;
  transition: width 170ms var(--ease-m-blip), 
              opacity 170ms var(--ease-m-blip),
              filter 170ms var(--ease-m-blip),
              background-image 170ms var(--ease-m-blip); 
  will-change: width, opacity, filter, background-image;
  pointer-events: none;
}
/* ... other existing nav-grille styles ... */

/* Hero Section Dimming (Existing, keep or integrate with Atelier background) */
.hero-backdrop-dimmed {
  @apply transition-m-blip;
  filter: brightness(0.85);
}
/* ... */

/* Contact Form Halo Effect (Existing, check if Nightfall page needs this) */
.form-container-halo { 
  box-shadow: 0 0 8px 2px hsla(var(--primary)/0.2);
  @apply transition-m-blip;
}
/* ... */


/* === NIGHTFALL ATELIER HERO STYLES START === */

/* 1. Nocturne Crown Halo (Medallion) */
.hero-medallion-nightfall {
  @apply relative w-[120px] h-[120px] rounded-full p-0.5;
  /* Initial faint glow */
  box-shadow: 0 0 20px 0px hsla(var(--m-light-blue-hsl), 0.15);
  transition: box-shadow 0.9s ease-in-out;
}

.hero-medallion-nightfall-inner {
  @apply relative w-full h-full rounded-full overflow-hidden flex items-center justify-center;
  /* Obsidian liquid base */
  background: linear-gradient(145deg, hsl(var(--liquid-obsidian-start)), hsl(var(--liquid-obsidian-end)));
  border: 1px solid hsl(var(--border) / 0.3); /* Subtle edge */
}

.hero-medallion-nightfall-inner::before { /* M-Tricolor Pulse Ring */
  content: "";
  @apply absolute inset-[-2px] rounded-full z-0;
  background: conic-gradient(
    hsla(var(--bmw-i-blue-hsl),0.7) 0deg, 
    hsla(var(--hyper-violet-hsl),0.7) 120deg, 
    hsla(var(--m-red-hsl),0.7) 240deg, 
    hsla(var(--bmw-i-blue-hsl),0.7) 360deg
  );
  background-size: 100%;
  animation: mStripeConicPulse 3s linear infinite paused;
  filter: blur(1px);
  opacity: 0.8;
}
.hero-medallion-nightfall:hover .hero-medallion-nightfall-inner::before,
.hero-medallion-nightfall:focus-within .hero-medallion-nightfall-inner::before {
  animation-play-state: running;
}
.hero-medallion-nightfall:hover {
  box-shadow: 0 0 35px 5px hsla(var(--m-light-blue-hsl), 0.3), /* Thicker glow */
              0 0 15px 2px hsla(var(--foreground), 0.1) inset; /* Molten glass inner highlight */
}
/* Click/Focus effect can be handled by Framer Motion if more complex */

/* 2. Headline Alloy Typography */
.hero-headline-nightfall {
  font-family: var(--font-fraunces);
  @apply text-foreground font-bold relative; /* Base color, might be overridden by sheen */
  font-optical-sizing: auto;
  font-variation-settings: "opsz" 36, "wght" 700, "SOFT" 50, "WONK" 0.2;
  text-shadow: 0 1px 1px hsla(0,0%,0%,0.5), 0 2px 3px hsla(0,0%,0%,0.3); /* Subtle depth */
}
.hero-headline-nightfall .word-pulse { /* For individual word hover pulse */
  @apply inline-block transition-transform duration-150 ease-m-blip;
}
.hero-headline-nightfall .word-pulse:hover {
  transform: scale(1.03) translateY(-1px);
  text-shadow: 0 0 8px hsl(var(--foreground)/0.5);
}

.hero-tagline-nightfall {
  font-family: var(--font-inter); /* Alternative for Satoshi/General Sans */
  @apply font-normal uppercase tracking-wider text-transparent bg-clip-text relative;
  /* Liquid Titanium Mirror Effect - Animated Gradient */
  background-image: linear-gradient(110deg, 
    hsl(var(--silver-hsl)/0.8) 15%, 
    hsl(var(--bmw-i-blue-hsl)/0.7) 35%, 
    hsl(var(--silver-hsl)/0.8) 55%,
    hsl(var(--bmw-i-blue-hsl)/0.7) 75%,
    hsl(var(--silver-hsl)/0.8) 95%
  );
  background-size: 300% 100%;
  animation: liquidTitaniumSheen 5s linear infinite;
  -webkit-text-stroke: 0.5px hsl(var(--foreground)/0.2); /* Subtle edge */
}

/* 3. Dynamic Atelier Background */
.hero-atelier-bg {
  @apply relative overflow-hidden;
  background: radial-gradient(ellipse at 50% 30%, hsl(var(--background)) 0%, hsl(240,10%,2%) 70%); /* Deep navy-to-black vignette */
}
.hero-atelier-bg::before { /* Nano particle shimmer */
  content: "";
  @apply absolute inset-0 -z-10;
  background-image: radial-gradient(hsl(var(--m-light-blue-hsl)/0.03) 0.5px, transparent 0.5px),
                    radial-gradient(hsl(var(--m-red-hsl)/0.02) 0.5px, transparent 0.5px);
  background-size: 30px 30px, 45px 45px;
  background-position: 0 0, 15px 15px;
  animation: nanoParticleDrift 10s linear infinite alternate;
}
.hero-lens-flare {
  @apply absolute -z-10 pointer-events-none opacity-10;
  background: linear-gradient(to bottom, hsla(var(--bmw-i-blue-hsl),0.15) 0%, transparent 60%);
  border-radius: 50%;
  filter: blur(15px);
  will-change: transform, opacity;
}

/* 5. RPM Tachometer Strip — Quantum Edition */
.hero-rpm-quantum {
  @apply fixed bottom-4 right-4 h-1.5 w-0 rounded-full transition-all duration-100 ease-linear;
  background: linear-gradient(to right, 
    hsl(var(--bmw-i-blue-hsl)) var(--tach-q-stop1, 0%), 
    hsl(var(--hyper-violet-hsl)) var(--tach-q-stop2, 33%), 
    hsl(var(--voltage-gold-hsl)) var(--tach-q-stop3, 66%),
    hsl(var(--voltage-gold-hsl)) var(--tach-q-stop4, 100%) 
  );
  box-shadow: inset 0 0 3px hsla(0,0%,0%,0.4), 0 0 6px hsla(var(--voltage-gold-hsl),0.4);
  animation: tachometerSineWave 2s infinite ease-in-out; /* Gentle undulation */
}
.hero-rpm-quantum::before { /* Ghost trail */
  content: '';
  @apply absolute -inset-0.5 rounded-full opacity-30 blur-sm;
  background: inherit;
  z-index: -1;
  transition: opacity 0.3s ease-out; /* Trail fades slightly slower */
  /* JS will need to control width of this trail if it's delayed */
}

/* Keyframes for Nightfall Atelier */
@keyframes mStripeConicPulse { /* For Medallion */
  0%, 100% { opacity: 0.7; filter: blur(1px) brightness(1); }
  50% { opacity: 1; filter: blur(0.5px) brightness(1.3); }
}

@keyframes liquidTitaniumSheen { /* For tagline */
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@media (prefers-reduced-motion: reduce) {
  .hero-medallion-nightfall-inner::before { animation: none !important; }
  .hero-tagline-nightfall { animation: none !important; background-size: 100% 100%; }
  .hero-atelier-bg::before { animation: none !important; }
  .hero-rpm-quantum { animation: none !important; }
  .hero-lens-flare { animation: none !important; }
}

/* Existing Hero Styles to be adapted or removed if conflicting */
/* ... (ensure these don't clash with new Nightfall styles) ... */
.hero-medallion-empire, .hero-medallion-empire-inner, .hero-headline-empire, .hero-tagline-empire, .hero-empire-bg, .hero-empire-tachometer, .hero-gantry-light {
  /* These are from Empire Edition, may need removal or careful overriding if still present */
  /* For now, assume Nightfall styles will take precedence due to specificity or direct application */
}
/* === NIGHTFALL ATELIER HERO STYLES END === */

/* === EMPIRE EDITION HERO STYLES START === */
/* ... (Keep existing Empire styles for reference or if they are still used elsewhere, but Nightfall styles should override for hero) ... */
/* === EMPIRE EDITION HERO STYLES END === */
