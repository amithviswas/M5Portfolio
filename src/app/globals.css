@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Aggressive Elegance Palette & M5 Apex Finish Adjustments */
    --background: 0 0% 6%; /* Deep Matte Black for a more aggressive base */
    --foreground: 0 0% 98%; /* Sharp White LED-like text */

    --card: 0 0% 8%; /* Darker Gunmetal for cards */
    --card-foreground: 0 0% 95%;

    --popover: 220 10% 7%;
    --popover-foreground: 0 0% 95%;

    --primary: 0 100% 55%; /* Neon Red, slightly brighter */
    --primary-foreground: 0 0% 98%;

    --secondary: 220 10% 12%; /* Even Darker Gunmetal */
    --secondary-foreground: 0 0% 75%;

    --muted: 220 10% 18%;
    --muted-foreground: 0 0% 55%;

    --accent: 210 100% 55%; /* M Performance Blue, slightly brighter */
    --accent-foreground: 0 0% 98%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;

    --border: 220 10% 15%; /* Darker border */
    --input: 220 10% 10%;  /* Darker input */
    --ring: 210 100% 60%; 

    --radius: 0.3rem; /* Sharper corners for "Aggressive Elegance" */

    /* M-Specific Colors */
    --bmw-m-blue: 210 100% 55%; 
    --blood-red: 0 100% 55%; 
    --m-violet-hsl: 270 100% 65%;
    --uv-blue: 220 100% 60%; /* UV Blue for glows, slightly adjusted */
    --m-light-blue-hsl: 210 100% 65%; /* Brighter, icier blue for accents */
    --m-red-hsl: 0 100% 50%; /* Primary Red as M-Red */
    
    /* Empire Edition Colors */
    --empire-royal-blue-hsl: 220 70% 55%;
    --empire-crimson-hsl: 350 70% 50%;
    --empire-gold-hsl: 45 100% 50%;
    --empire-i-blue-fog-start-hsl: 210 100% 15%; 
    --empire-i-blue-fog-end-hsl: 220 10% 7%;  

    /* Nightfall Atelier Colors */
    --nightfall-deep-navy-hsl: 220 40% 8%;
    --nightfall-obsidian-hsl: 220 15% 5%;
    --nightfall-titanium-sheen-start-hsl: 210 15% 70%;
    --nightfall-titanium-sheen-end-hsl: 210 100% 85%;
    
    /* Commented out as it was problematic and replaced with direct conic-gradient usage */
    /* --medallion-nightfall-gradient: conic-gradient(
      from 0deg,
      hsla(210, 100%, 50%, 0.7) 0%, 
      hsla(270, 100%, 65%, 0.7) 33.33%, 
      hsla(0, 100%, 50%, 0.7) 66.67%, 
      hsla(210, 100%, 50%, 0.7) 100% 
    ); */


    /* Animation Easing - "Throttle Blip" */
    --ease-m-throttle: cubic-bezier(.36,1.08,.33,1);

    /* For Sentient Console with opacity support */
    --neutral-900-hsl: 220 10% 8%; 
    --neutral-300-hsl: 0 0% 85%; 

    /* Empire Edition Text Shadow */
    --empire-text-shadow: 0 1px 1px rgba(0,0,0,0.6), 0 0 5px rgba(0,0,0,0.2), 0 1px 2px rgba(255,255,255,0.1) inset;
  }

  :root.dark {
    /* Ensure dark theme variables match the base for consistency */
    --background: 0 0% 6%;
    --foreground: 0 0% 98%;
    --card: 0 0% 8%;
    --card-foreground: 0 0% 95%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    scroll-behavior: smooth;
  }
  body {
    @apply bg-background text-foreground font-sans antialiased;
    /* Subtle carbon fiber pattern */
    background-image:
      linear-gradient(45deg, hsla(var(--card), 0.02) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.02) 75%, hsla(var(--card), 0.02)),
      linear-gradient(-45deg, hsla(var(--card), 0.02) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.02) 75%, hsla(var(--card), 0.02));
    background-size: 4px 4px; /* Finer carbon pattern */
  }

  .font-heading {
    font-family: var(--font-rajdhani);
    @apply font-bold uppercase tracking-wider; /* M-Badging Style */
  }
  .font-serif-display { font-family: var(--font-playfair-display); }
  .font-sans-condensed { font-family: var(--font-space-grotesk); }
  .font-fraunces { font-family: var(--font-fraunces); }
  .font-inter { font-family: var(--font-inter); }

  .transition-m-throttle {
    @apply transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter] duration-150 ease-m-throttle;
  }
  
  .card-m-glow {
    @apply shadow-lg transition-m-throttle; /* Ensure throttle transition is applied */
  }
  .card-m-glow:hover {
    /* Refined, more vibrant glow */
    @apply shadow-[0_12px_28px_-5px_hsl(var(--primary)/0.7),_0_8px_18px_-8px_hsl(var(--bmw-m-blue)/0.55),_0_0_15px_2px_hsl(var(--primary)/0.3)_inset];
  }

  /* === M5 APEX FINISH STYLES START === */
  .carbon-wave-animated::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(45deg, hsla(var(--card), 0.07) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.07) 75%, hsla(var(--card), 0.07)),
      linear-gradient(-45deg, hsla(var(--card), 0.07) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.07) 75%, hsla(var(--card), 0.07));
    background-size: 10px 10px; /* Slightly larger for weave effect */
    opacity: 0.5;
    z-index: 0; /* Ensure it's behind content if parent has no bg */
    animation: carbonWeaveShift 8s linear infinite;
  }
  
  .footer-diffuser-fin-dot {
    @apply w-2 h-2 rounded-full bg-primary shadow-[0_0_6px_2px_hsl(var(--primary)/0.7)];
    animation: pulseDot 10s infinite ease-in-out;
  }

  /* Laser Crest Navbar Underline */
  .nav-laser-crest {
    @apply relative text-muted-foreground hover:text-primary-foreground transition-m-throttle;
  }
  .nav-laser-crest::after {
    content: '';
    @apply absolute left-0 h-[6px] bg-gradient-to-r from-transparent via-primary to-transparent opacity-0 transition-m-throttle; /* Use custom transition */
    bottom: -2px; /* Sits slightly below text */
    width: 0%;
    filter: blur(0.5px) drop-shadow(0 0 3px hsl(var(--primary)/0.5));
    transform-origin: center;
    clip-path: polygon(10% 0, 90% 0, 100% 100%, 0% 100%); /* V-shape / angled bar */
  }
  .nav-laser-crest:hover::after,
  .nav-laser-crest.active-link::after {
    width: 100%;
    opacity: 1;
    background-image: linear-gradient(to right, hsl(var(--bmw-m-blue)), hsl(var(--primary)));
    filter: blur(0px) drop-shadow(0 0 5px hsl(var(--primary)/0.7));
  }
  .nav-laser-crest.active-link::after {
    opacity: 0.4; /* Settles at 40% for active */
  }
  .nav-laser-crest.active-link {
    @apply text-primary; /* Keep active link text primary */
  }


  /* RPM-Inspired Navbar (Aggressive Elegance) - Kept for reference or alternative styling */
  .nav-rpm-underline { 
    @apply relative text-muted-foreground hover:text-primary-foreground transition-m-throttle;
  }
  .nav-rpm-underline::after {
    content: '';
    @apply absolute left-1/2 bottom-[-4px] h-[3px] bg-primary opacity-0 rounded-full; /* Changed to pill */
    transition: all 200ms var(--ease-m-throttle); 
    transform: translateX(-50%) scaleX(0);
    box-shadow: 0 0 8px hsl(var(--primary)/0.5);
  }
  .nav-rpm-underline:hover::after,
  .nav-rpm-underline.active-link::after {
    opacity: 1;
    transform: translateX(-50%) scaleX(0.7); 
  }
  .nav-rpm-underline:hover::after {
    background-color: hsl(var(--accent)); 
    animation: navRPMItemPulse 0.6s infinite alternate;
  }
  .nav-rpm-underline.active-link::after {
    background-color: hsl(var(--primary)); 
    animation: navRPMItemPulseActive 0.8s infinite alternate; 
  }
  .nav-rpm-active-glow { /* Text glow for active link */
    @apply text-primary;
    text-shadow: 0 0 8px hsl(var(--primary)/0.7);
  }


  .section-grille-blade {
    @apply absolute w-[3px] bg-gradient-to-b from-neutral-700 to-neutral-500 shadow-md;
    /* Default to full height, specific slide-in handled by Framer Motion */
  }
  
  .crystal-hud-tooltip-content {
    @apply bg-black/70 backdrop-blur-md border-gradient-m-blue-red p-0 shadow-xl;
    clip-path: polygon(0% 15%, 15% 0%, 85% 0%, 100% 15%, 100% 85%, 85% 100%, 15% 100%, 0% 85%); 
  }
  .crystal-hud-tooltip-content .tooltip-inner-padding { 
     @apply p-2 px-3 text-sm text-primary-foreground;
  }

  .border-gradient-m-blue-red { 
    border: 1px solid transparent;
    background-clip: padding-box, border-box;
    background-origin: padding-box, border-box;
    background-image: linear-gradient(to right, hsl(var(--background)), hsl(var(--background))), 
                      linear-gradient(135deg, hsl(var(--bmw-m-blue)), hsl(var(--primary)));
  }

  .hero-headlight-sweep-bg {
    @apply fixed -z-10 opacity-[0.07] mix-blend-screen; 
    top: -30%; left: -50%; width: 200vw; height: 200vh;
    background: radial-gradient(ellipse at center, hsla(var(--accent), 0.5) 0%, transparent 50%);
    transform-origin: center center;
  }
  /* === M5 APEX FINISH STYLES END === */

  /* === NIGHTFALL ATELIER HERO STYLES START === */
  .hero-medallion-nightfall-inner {
    @apply relative inline-block p-1 rounded-full shadow-xl;
    background: radial-gradient(circle, hsl(var(--card)) 50%, transparent 75%), 
                linear-gradient(135deg, hsl(var(--border)) 0%, hsl(var(--background)) 50%, hsl(var(--border)) 100%); 
    border: 2px solid transparent;
  }
   .hero-medallion-nightfall-inner::before {
    content: '';
    position: absolute;
    inset: -3px; 
    border-radius: 9999px;
    z-index: -1;
    /* background: var(--medallion-nightfall-gradient); */ /* Using direct values now */
    background: conic-gradient(
      from 0deg,
      hsla(210, 100%, 50%, 0.7) 0%, 
      hsla(270, 100%, 65%, 0.7) 33.33%, 
      hsla(0, 100%, 50%, 0.7) 66.67%, 
      hsla(210, 100%, 50%, 0.7) 100% 
    );
    animation: spin 4s linear infinite, nightfallPulse 2s infinite ease-in-out alternate;
    filter: blur(2px);
  }
  .hero-headline-nightfall {
    font-family: var(--font-fraunces); 
  }
  .hero-subtext-nightfall {
    font-family: var(--font-inter); 
  }
  .liquid-titanium-effect {
    @apply relative;
  }
  .nano-particle-shimmer { 
    @apply absolute inset-0 overflow-hidden pointer-events-none;
  }
  .nano-particle {
    @apply absolute rounded-full bg-accent opacity-0;
    animation: nanoDrift 8s infinite ease-in-out;
  }
  .vertical-lens-flare {
    @apply absolute top-0 h-full w-16 mix-blend-screen pointer-events-none opacity-20;
    background: linear-gradient(to bottom, transparent, hsla(var(--accent), 0.3), transparent);
    animation: flareShift 10s infinite alternate ease-in-out;
  }
  /* === NIGHTFALL ATELIER HERO STYLES END === */

  /* === EMPIRE EDITION HERO STYLES START === */
  .hero-medallion-empire {
    @apply relative inline-block p-1 rounded-full shadow-xl;
    background: radial-gradient(circle, hsl(var(--card)) 50%, transparent 75%), 
                linear-gradient(135deg, hsl(var(--border)) 0%, hsl(var(--background)) 50%, hsl(var(--border)) 100%); 
    border: 2px solid transparent; 
  }
  .hero-medallion-empire::before { 
    content: '';
    @apply absolute inset-[-3px] rounded-full -z-10; 
    background: transparent; 
    animation: empireMedallionPulse 2.5s infinite linear; 
  }
  .hero-medallion-empire:hover::after { 
    content: '';
    @apply absolute inset-0 rounded-full opacity-0;
    background: linear-gradient(45deg, transparent 30%, hsla(var(--empire-gold-hsl),0.4) 50%, transparent 70%);
    animation: goldGlintSweep 1.2s linear forwards; 
  }
  .hero-medallion-empire .spec-highlight-arc { 
    @apply absolute inset-0 rounded-full;
    background: linear-gradient(135deg, rgba(255,255,255,.15) 0%, transparent 50%);
  }
  .hero-headline-empire {
    font-family: var(--font-playfair-display);
    @apply text-[#E5E5E5];
    text-shadow: var(--empire-text-shadow);
  }
  .hero-tagline-empire {
    font-family: var(--font-space-grotesk);
    @apply text-transparent bg-clip-text bg-gradient-to-r from-[hsl(var(--bmw-m-blue))] to-[hsl(var(--primary))] relative;
  }
  .hero-tagline-empire::after { 
    content: '';
    @apply absolute left-0 -bottom-1 h-[2px] bg-gradient-to-r from-[hsl(var(--bmw-m-blue))] to-[hsl(var(--primary))];
    width: 0%; 
    transition: width 0.5s ease-out; 
  }
  .hero-tagline-empire.underline-visible::after {
    width: 100%;
  }
  .hero-empire-bg {
    @apply relative overflow-hidden; 
    background-image: 
      radial-gradient(ellipse at 50% 10%, hsla(var(--empire-i-blue-fog-start-hsl), 0.25) 0%, transparent 60%), 
      linear-gradient(45deg, hsla(var(--card), 0.02) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.02) 75%, hsla(var(--card), 0.02)), 
      linear-gradient(-45deg, hsla(var(--card), 0.02) 25%, transparent 25%, transparent 75%, hsla(var(--card), 0.02) 75%, hsla(var(--card), 0.02)),
      radial-gradient(circle at 30% 30%, #1a1a1c 0%, hsl(var(--background)) 70%); 
    background-size: cover, 8px 8px, 8px 8px, cover; 
  }
  .halo-glow { 
    @apply absolute rounded-full mix-blend-soft-light pointer-events-none;
    animation: bloomGlide 15s infinite alternate ease-in-out;
  }
  .hero-bloom-extra { 
    @apply absolute -z-10;
    width: 600px; height: 600px; top: 40%; left: 40%;
    background: radial-gradient(circle, hsla(var(--m-violet-hsl), 0.12) 0%, transparent 65%);
    animation: bloomGlide 18s infinite alternate ease-in-out 1.5s;
  }
  .hero-empire-tachometer {
    @apply fixed bottom-4 right-4 w-24 h-12 rounded-md p-1 overflow-hidden;
    background: linear-gradient(135deg, hsl(var(--card) / 0.7), hsl(var(--background) / 0.7));
    backdrop-filter: blur(8px);
    border: 1px solid hsl(var(--border) / 0.5);
    box-shadow: 0 0 15px hsl(var(--accent)/0.3), inset 0 1px 2px hsl(var(--foreground)/0.1);
  }
  .hero-empire-tachometer-bar {
    @apply h-full rounded-sm transition-all duration-300 ease-linear;
  }
  .hero-empire-tachometer::before { 
    content: '';
    @apply absolute top-0 left-0 h-full rounded-sm opacity-30 blur-sm;
    background: inherit; 
  }
   .hero-empire-tachometer-trail { 
    @apply absolute top-0 left-0 h-full w-full rounded-sm opacity-0 blur-sm transition-opacity duration-500;
    background: inherit;
  }
  .hero-gantry-light {
    @apply absolute left-0 w-full h-[3px] opacity-0;
    background: linear-gradient(90deg, transparent, hsl(var(--accent)/0.7) 50%, transparent);
    box-shadow: 0 0 8px 1px hsl(var(--accent)/0.5);
  }
  /* === EMPIRE EDITION HERO STYLES END === */
  
  /* RPM Widget (basic, can be expanded from previous prompts) */
  .rpm-widget-dial {
    @apply relative w-20 h-20 rounded-full bg-neutral-800 border-2 border-neutral-700 shadow-inner;
  }
  .rpm-widget-center {
    @apply absolute top-1/2 left-1/2 w-3 h-3 bg-primary rounded-full -translate-x-1/2 -translate-y-1/2 z-10;
  }
  .rpm-widget-needle {
    @apply absolute top-1/2 left-1/2 w-1 h-8 bg-primary-foreground rounded-t-full origin-bottom transform -translate-y-full;
  }

  /* Content Burst Section */
  .carbon-card-burst {
    @apply bg-neutral-800 border border-neutral-700 rounded-lg shadow-xl relative overflow-hidden transition-all duration-300 ease-[cubic-bezier(0.165,0.84,0.44,1)];
  }
  .carbon-card-burst:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 20px hsl(var(--primary)/0.3), 0 0 15px hsl(var(--accent)/0.2);
  }
  .carbon-card-burst::before { 
    content: "";
    @apply absolute top-0 left-0 w-full h-1 rounded-t-lg opacity-75;
    background: linear-gradient(to right, hsl(var(--bmw-m-blue)), hsl(var(--m-violet-hsl)), hsl(var(--primary)));
  }
  .gantry-light-sweep-burst { 
    @apply absolute top-0 left-0 w-full h-1 opacity-0;
    background: linear-gradient(90deg, transparent, hsl(var(--accent)/0.7) 50%, transparent);
    box-shadow: 0 0 8px 1px hsl(var(--accent)/0.5);
    animation: gantrySweepAnimation 0.7s ease-out forwards;
  }
  .parallax-bg-spotlight {
    @apply absolute inset-0 -z-10 overflow-hidden;
  }

  /* === SENTIENT CONSOLE & HUD STYLES (Aggressive Elegance Theme) === */
  .hud-console-panel {
    @apply fixed bottom-4 left-4 p-3 md:p-4 rounded-lg shadow-2xl text-xs backdrop-blur-md border border-neutral-700/70;
    background-color: hsla(var(--neutral-900-hsl), 0.85); 
    color: hsla(var(--neutral-300-hsl), 1); 
    font-family: var(--font-rajdhani), monospace; 
    width: 280px; 
    max-height: 280px; 
    display: flex;
    flex-direction: column;
    gap: 3px; 
    box-shadow: 0 0 25px hsl(var(--uv-blue)/0.2), 0 0 10px hsl(var(--uv-blue)/0.1) inset;
    transition: box-shadow 0.3s ease-m-throttle;
  }
  .hud-console-panel.uv-glow { /* For XENOFRAME Ghostline active */
    box-shadow: 0 0 30px hsl(var(--uv-blue)/0.5), 0 0 15px hsl(var(--uv-blue)/0.3) inset, 0 0 5px hsl(var(--primary)/0.3);
  }
  .hud-console-header {
    @apply flex justify-between items-center pb-1 mb-1 border-b border-neutral-700;
  }
  .hud-console-title {
    @apply text-sm font-bold uppercase tracking-wider text-primary-foreground font-heading;
  }
  .hud-console-settings-icon {
    @apply text-neutral-400 hover:text-primary transition-m-throttle;
    animation: spin 3s linear infinite;
  }
  .hud-console-log { 
    @apply flex-grow overflow-y-auto text-[11px] leading-snug p-1 bg-black/20 rounded-sm min-h-[50px];
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary)) hsl(var(--neutral-800));
  }
  .hud-console-log .console-log-line { @apply mb-1; }
  .hud-console-log .console-log-line.input::before { content: '> XENO_CMD: '; @apply text-accent; } /* XENOFRAME prompt */
  .hud-console-log .console-log-line.output { @apply text-green-400; }
  .hud-console-log .console-log-line.error { @apply text-red-400; }
  .hud-console-log .console-log-line.info { @apply text-blue-400; }
  .hud-console-log .console-log-line.system { @apply text-purple-400 italic; } /* XENOFRAME system message */
  .hud-console-log .typewriter-cursor {
    @apply inline-block bg-primary w-2 h-3 ml-1 animate-pulse;
  }
  .hud-gauge-item {
    @apply flex justify-between items-center text-[11px] py-0.5;
  }
  .hud-gauge-label {
    @apply flex items-center gap-1.5 text-neutral-400 uppercase tracking-wider;
  }
  .hud-gauge-label svg { @apply w-3 h-3 text-accent; }
  .hud-gauge-value {
    @apply font-mono text-neutral-200 font-medium;
  }
  .hud-meter-track {
    @apply h-1.5 w-full bg-neutral-700 rounded-full overflow-hidden my-1;
  }
  .hud-meter-fill {
    @apply h-full rounded-full transition-all duration-300 ease-linear;
    box-shadow: inset 0 0 3px hsl(var(--background)/0.5);
  }
  .hud-console-button-container {
    @apply grid grid-cols-2 gap-1.5 pt-1 mt-1 border-t border-neutral-700;
  }
  .hud-console-button { 
    @apply !w-full !h-8 !text-[10px] !tracking-normal !border-neutral-600; 
  }
  .hud-console-button.active-toggle { 
    @apply !bg-gradient-to-r !from-accent !to-sky-500 !text-primary-foreground !border-accent shadow-[0_0_8px_hsl(var(--accent)/0.5)];
  }
  .form-container-halo { 
    transition: box-shadow 0.4s var(--ease-m-throttle);
  }
  .form-container-halo-active { /* For Contact Page */
    box-shadow: 0 0 25px 5px hsl(var(--primary)/0.5), 0 0 10px 2px hsl(var(--primary)/0.3);
  }
  /* === SENTIENT CONSOLE & HUD STYLES END === */
  
  /* === SKILL SECTION TRAIL EFFECT START === */
  .skill-card-trail-container { 
    @apply relative; 
  }
  .skill-card-trail {
    @apply absolute inset-0 -z-10 rounded-lg opacity-0 transition-opacity duration-300;
    background: radial-gradient(circle at center, hsl(var(--primary)/0.3) 0%, transparent 70%);
    transform: scale(1.2); 
    filter: blur(8px);
  }
  .skill-card-trail-container:hover .skill-card-trail {
    opacity: 1;
    animation: skillTrailFadeOut 0.5s 0.2s forwards; 
  }
  .skill-card-trail.electric-trail { /* For XENOFRAME */
    background: radial-gradient(circle at center, hsl(var(--uv-blue)/0.4) 0%, transparent 60%);
    filter: blur(6px) brightness(1.2);
  }
  /* === SKILL SECTION TRAIL EFFECT END === */

  /* === NEURAL DRIFT TIMELINE STYLES START === */
  .neural-drift-timeline-container {
    @apply relative w-full py-4;
  }
  .neural-drift-timeline {
    @apply flex overflow-x-auto py-4 px-2 space-x-8 relative;
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary)) hsl(var(--background));
  }
  .neural-drift-timeline::before { 
    content: '';
    @apply absolute left-0 top-1/2 h-[2px] w-full bg-neutral-700 -translate-y-1/2 -z-10;
  }
  .timeline-milestone {
    @apply relative flex-shrink-0 w-72 bg-card/80 p-4 rounded-lg shadow-lg border border-border/50 text-center transition-all duration-300 hover:scale-105 hover:shadow-primary/30;
  }
  .timeline-milestone-node { 
    @apply absolute -top-1.5 left-1/2 w-4 h-4 bg-primary rounded-full -translate-x-1/2 transform border-2 border-background shadow-md;
  }
  .timeline-milestone-current .timeline-milestone-node {
    box-shadow: 0 0 12px hsl(var(--primary)/0.8);
    animation: pulseDot 2s infinite ease-in-out; /* Reuse pulseDot for current timeline item */
  }
  .timeline-milestone-icon { /* For achievement icon on timeline */
    @apply absolute -left-3 -top-3 p-2 bg-accent rounded-full shadow-lg border-2 border-background;
  }
  /* === NEURAL DRIFT TIMELINE STYLES END === */

  /* === USER INTERACTION CONTEXT FEEDBACK STYLES START (XENOFRAME) === */
  .rare-section-pulse-active body { 
    animation: rareSectionVisualPulse 0.5s ease-out forwards;
  }
  .hyperactive-scroll-feedback body { 
    animation: hyperScrollVisualFeedback 0.3s ease-out forwards;
  }
  .skill-card-ghostline-active { 
    animation: ghostlineSkillPulse 2s infinite ease-in-out;
    border-color: hsl(var(--uv-blue)) !important;
  }
  .animate-skill-jitter {
    animation: skillJitter 0.3s infinite alternate ease-in-out;
  }
  .erratic-glow { 
    animation: erraticGlowAnimation 0.8s infinite ease-in-out;
  }
  /* === USER INTERACTION CONTEXT FEEDBACK STYLES END === */

  /* === SCROLL MOMENTUM BAR / APEX METER / RPM GAUGE STYLES START === */
  .m-chrono-scroll-gauge-container { 
    @apply fixed top-4 left-4 h-8 w-48 bg-neutral-900/70 backdrop-blur-sm rounded-sm overflow-hidden shadow-lg border border-neutral-700/50;
    clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%); /* More angular XENOFRAME shape */
    box-shadow: 0 0 15px 2px hsl(var(--uv-blue)/0.4), inset 0 1px 1px hsl(var(--foreground)/0.05), 0 0 5px hsl(var(--background)/0.3) inset;
  }
  .m-rpm-gauge-fill { 
    @apply h-full transition-all duration-100 ease-linear rounded-sm;
    box-shadow: inset 0 0 8px hsl(var(--background)/0.5), 0 0 10px hsl(var(--primary)/0.6); 
  }
  .m-rpm-gauge-fill-xenoflame { /* XENOFRAME gradient */
    background-image: linear-gradient(to right, hsl(var(--bmw-m-blue)) 0%, hsl(var(--m-violet-hsl)) 50%, hsl(var(--empire-gold-hsl)) 100%);
    box-shadow: inset 0 0 5px hsla(0,0%,0%,0.5), 0 0 8px hsl(var(--m-violet-hsl)/0.7), 0 0 15px hsl(var(--empire-gold-hsl)/0.5);
  }
  .m-chrono-tick-container {
    @apply absolute inset-0 flex justify-between px-1 items-center pointer-events-none;
  }
  .m-rpm-tick-major, .m-rpm-tick-minor, .m-rpm-tick-redzone {
    @apply h-2/3 opacity-80 transition-opacity duration-300; 
    box-shadow: 0 0 3px hsl(var(--foreground)/0.7), 0 0 1px hsl(var(--foreground)/0.9); 
  }
  .m-rpm-tick-major { width: 2px; background-color: hsl(var(--foreground)/0.9); }
  .m-rpm-tick-minor { width: 1px; background-color: hsl(var(--foreground)/0.6); }
  .m-rpm-tick-redzone { 
    background-color: hsl(var(--primary)/0.9) !important; 
    box-shadow: 0 0 5px hsl(var(--primary)/0.8), 0 0 2px hsl(var(--primary)/1); 
  }
  .m-rpm-tick-active { opacity: 1; transform: scaleY(1.15); } 
  .chrono-gauge-redline .m-rpm-gauge-fill { 
    animation: m-rpm-redline-led-pulse 0.3s infinite alternate ease-in-out; /* XENOFRAME faster pulse */
  }
  /* === SCROLL MOMENTUM BAR / APEX METER / RPM GAUGE STYLES END === */

  /* === NEUROLINK TERMINAL STYLES START === */
  .neurolink-terminal-overlay {
    @apply fixed inset-0 bg-black/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4;
    animation: fadeIn 0.3s ease-out;
  }
  .neurolink-terminal {
    @apply bg-neutral-900 border border-primary/30 rounded-lg shadow-2xl w-full max-w-2xl h-[70vh] flex flex-col overflow-hidden;
    box-shadow: 0 0 30px hsl(var(--primary)/0.4);
    animation: slideInFromBottom 0.4s ease-out;
  }
  .neurolink-terminal-header {
    @apply p-2 bg-neutral-800 border-b border-primary/30 text-xs text-primary font-mono flex justify-between items-center;
  }
  .neurolink-terminal-output {
    @apply flex-grow p-3 overflow-y-auto font-mono text-sm;
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary)) hsl(var(--neutral-800));
  }
  .neurolink-terminal-output div { @apply mb-1 whitespace-pre-wrap break-words; }
  .neurolink-terminal-output .input-line::before { content: 'XENO_PROMPT:> '; @apply text-accent; }
  .neurolink-terminal-output .output-line { @apply text-green-400; }
  .neurolink-terminal-output .error-line { @apply text-red-500; }
  .neurolink-terminal-output .info-line { @apply text-blue-400; }
  .neurolink-terminal-input-area {
    @apply p-2 border-t border-primary/30 flex items-center bg-neutral-800;
  }
  .neurolink-terminal-prompt { @apply text-accent font-mono text-sm mr-2; }
  .neurolink-terminal-input {
    @apply flex-grow bg-transparent border-none outline-none text-primary-foreground font-mono text-sm p-1;
    text-shadow: 0 0 5px hsl(var(--primary)/0.5);
  }
  /* === NEUROLINK TERMINAL STYLES END === */

  /* Keyframes */
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideInFromBottom { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes nightfallPulse {
    0% { box-shadow: 0 0 5px 0px hsla(210, 100%, 70%, 0.5); }
    50% { box-shadow: 0 0 15px 5px hsla(270, 100%, 75%, 0.7), 0 0 8px 2px hsla(0, 100%, 65%, 0.5); }
    100% { box-shadow: 0 0 5px 0px hsla(210, 100%, 70%, 0.5); }
  }

  @keyframes m-rpm-redline-led-pulse { /* XENOFRAME RPM Gauge Redline */
    0% {
      box-shadow: inset 0 0 6px hsl(var(--background)/0.4), 0 0 15px 4px hsl(var(--primary)/0.9), 0 0 30px 8px hsl(var(--primary)/0.6);
      filter: brightness(1.5) saturate(1.5);
    }
    100% {
      box-shadow: inset 0 0 10px hsl(var(--background)/0.5), 0 0 25px 7px hsl(var(--primary)/1), 0 0 50px 15px hsl(var(--primary)/0.8);
      filter: brightness(2.0) saturate(2.0);
    }
  }

  @keyframes carbonWeaveShift { 
    0% { background-position: 0 0; }
    100% { background-position: 20px 20px; }
  }
  @keyframes pulseDot {
    0%, 100% { opacity: 0.7; transform: scale(1); }
    5% { opacity: 1; transform: scale(1.1); }
    10% { opacity: 0.7; transform: scale(1); }
  }
  @keyframes navCrestFlash {
    0% { background: hsl(var(--accent)) }
    50% { background: hsl(var(--m-violet-hsl)) }
    100% { background: hsl(var(--primary)) }
  }
  @keyframes navRPMItemPulse { 
    from { transform: translateX(-50%) scaleX(0.7); box-shadow: 0 0 8px hsl(var(--accent)/0.5); }
    to   { transform: translateX(-50%) scaleX(0.75); box-shadow: 0 0 12px hsl(var(--accent)/0.7); }
  }
  @keyframes navRPMItemPulseActive { 
    from { transform: translateX(-50%) scaleX(0.7); box-shadow: 0 0 10px hsl(var(--primary)/0.6); }
    to   { transform: translateX(-50%) scaleX(0.8); box-shadow: 0 0 15px hsl(var(--primary)/0.8); }
  }
  @keyframes empireMedallionPulse {
    0%, 100% { box-shadow: 0 0 8px 2px hsla(var(--bmw-m-blue), 0.7), 0 0 4px 1px hsla(var(--bmw-m-blue), 0.5) inset; }
    33% { box-shadow: 0 0 10px 3px hsla(var(--m-violet-hsl), 0.7), 0 0 5px 1px hsla(var(--m-violet-hsl), 0.5) inset; }
    66% { box-shadow: 0 0 8px 2px hsla(var(--primary), 0.7), 0 0 4px 1px hsla(var(--primary), 0.5) inset; }
  }
  @keyframes goldGlintSweep {
    0% { opacity: 0; background-position: -100% 0; }
    50% { opacity: 0.7; }
    100% { opacity: 0; background-position: 100% 0; }
  }
  @keyframes bloomGlide {
    0% { transform: translate(0,0) scale(0.8); opacity: 0; }
    25% { opacity: 0.1; }
    50% { transform: translate(10vw, -5vh) scale(1.2); opacity: 0.15; }
    75% { opacity: 0.1; }
    100% { transform: translate(-10vw, 5vh) scale(0.8); opacity: 0; }
  }
  @keyframes nanoDrift {
    0%, 100% { transform: translate(0,0) scale(1); opacity: 0; }
    20% { opacity: 0.7; }
    50% { transform: translate(calc(var(--drift-x) * 1px), calc(var(--drift-y) * 1px)) scale(0.5); opacity: 0.3; }
    80% { opacity: 0.7; }
  }
  @keyframes flareShift {
    from { transform: translateX(-20px) translateY(calc(var(--flare-y-offset) * 1px)); }
    to { transform: translateX(20px) translateY(calc(var(--flare-y-offset) * 1px)); }
  }
  @keyframes gantrySweepAnimation {
    0% { opacity: 0; transform: scaleX(0.2) translateX(-50%); }
    50% { opacity: 1; transform: scaleX(1) translateX(0); }
    100% { opacity: 0; transform: scaleX(0.2) translateX(50%); }
  }
  @keyframes skillTrailFadeOut { to { opacity: 0;} }
  
  @keyframes rareSectionVisualPulse { /* For XENOFRAME rare section pulse */
    0% { box-shadow: 0 0 0 0px hsla(var(--uv-blue)/0); }
    50% { box-shadow: 0 0 0 15px hsla(var(--uv-blue)/0.3), 0 0 0 5px hsla(var(--primary)/0.2) inset; }
    100% { box-shadow: 0 0 0 0px hsla(var(--uv-blue)/0); }
  }
  @keyframes hyperScrollVisualFeedback { /* For XENOFRAME fast scroll feedback */
    0% { filter: saturate(1) brightness(1); }
    50% { filter: saturate(1.8) brightness(1.2) hue-rotate(25deg) contrast(1.2); } /* More intense */
    100% { filter: saturate(1) brightness(1); }
  }
  @keyframes ghostlineSkillPulse { 
    0%, 100% { box-shadow: 0 0 8px hsl(var(--uv-blue)/0.4), 0 0 4px hsl(var(--primary)/0.2); }
    50% { box-shadow: 0 0 20px hsl(var(--uv-blue)/0.7), 0 0 10px hsl(var(--primary)/0.4); }
  }
  @keyframes skillJitter {
    0% { transform: translate(0, 0) rotate(0); }
    25% { transform: translate(1px, -1px) rotate(0.5deg); }
    50% { transform: translate(-1px, 1px) rotate(-0.5deg); }
    75% { transform: translate(1px, 1px) rotate(0.25deg); }
    100% { transform: translate(0, 0) rotate(0); }
  }
  @keyframes erraticGlowAnimation {
    0% { box-shadow: 0 0 5px hsl(var(--primary)/0.2), 0 0 3px hsl(var(--accent)/0.1), 0 0 8px hsl(var(--uv-blue)/0.1); }
    25% { box-shadow: 0 0 15px hsl(var(--primary)/0.5), 0 0 8px hsl(var(--accent)/0.3), 0 0 18px hsl(var(--uv-blue)/0.3); transform: scale(1.01); }
    50% { box-shadow: 0 0 3px hsl(var(--primary)/0.1), 0 0 10px hsl(var(--accent)/0.4), 0 0 12px hsl(var(--uv-blue)/0.2); }
    75% { box-shadow: 0 0 12px hsl(var(--primary)/0.4), 0 0 5px hsl(var(--accent)/0.2), 0 0 15px hsl(var(--uv-blue)/0.25); transform: scale(0.99); }
    100% { box-shadow: 0 0 5px hsl(var(--primary)/0.2), 0 0 3px hsl(var(--accent)/0.1), 0 0 8px hsl(var(--uv-blue)/0.1); }
  }

  /* General Dialog Content Fix */
  .DialogContent[data-state="open"] {
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
}

/* Reduced Motion Fallbacks */
@media (prefers-reduced-motion: reduce) {
  .transition-m-throttle {
    transition: none !important;
  }
  .nav-rpm-underline:hover::after,
  .nav-rpm-underline.active-link::after {
    animation: none !important;
    transform: translateX(-50%) scaleX(0.7); 
  }
  .hud-console-panel { animation: none !important; } 
  .hud-console-settings-icon { animation: none; } /* Removed animate-spin-slow directly */
  
  .carbon-wave-animated::before { animation: none !important; } 
  .footer-diffuser-fin-dot { animation: none !important; opacity: 0.7; } 
  
  .hero-headlight-sweep-bg { animation: none !important; transform: translateX(0) rotate(-15deg) !important; } 
  
  .chrono-gauge-redline .m-rpm-gauge-fill { animation: none !important; background: hsl(var(--primary)) !important; } 
  .m-rpm-tick-active { transform: scaleY(1); } 
  
  .halo-glow { animation: none; opacity: 0.1; }  
  .hero-gantry-light { animation: none; opacity: 0.5; } 
  .hero-medallion-empire::before {animation: none;} 
  .hero-medallion-empire:hover::after { animation: none; opacity: 0.4; background-position: center; } 
  .hero-tagline-empire.underline-visible::after { transition: none; width: 100%;} 

  .hero-medallion-nightfall-inner::before { animation: none !important; opacity: 0.7; }

  .vertical-lens-flare { animation: none; } 
  .nano-particle { animation: none; } 
  .skill-card-trail-container:hover .skill-card-trail { animation: none; opacity: 0.5; } 
  
  .rare-section-pulse-active body { animation: none; } 
  .hyperactive-scroll-feedback body { animation: none; } 
  .skill-card-ghostline-active { animation: none; } 
  .animate-skill-jitter { animation: none; } 
  .erratic-glow { animation: none; } 
  .neurolink-terminal-overlay { animation: none; } 
  .neurolink-terminal { animation: none; }

  .m5-headlight-glow { animation: none !important; opacity: 0.7 !important; } 
  .m5-grille-line { animation: none !important; transform: scaleY(1) !important; } 

  .navRPMItemPulse, .navRPMItemPulseActive { animation: none !important; }
}

    